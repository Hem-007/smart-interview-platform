# Smart Interview Platform - API Endpoints

This document lists the HTTP endpoints exposed by the Smart Interview Platform backend, their HTTP method, URL, and access rules.

Base URL (when running locally):

- http://localhost:8080

Authentication:

- The application uses JWT Bearer tokens for authentication. Obtain a token from `POST /auth/login` and include it on protected requests in the `Authorization` header as:

  Authorization: Bearer <token>

Notes on access rules:

- Unauthenticated (public) endpoints: those under `/auth/**` and the root `/` health endpoint.
- Protected endpoints: `/submission/**`, `/user/**`, `/leaderboard/**`, and most `/questions/**` operations. The `SecurityConfig` enforces these rules and some controller methods add method-level role constraints using `@PreAuthorize`.

Endpoints
---------

General
- GET /               -> Public
  - Returns a simple health/message: "Smart Interview Prep Platform is running!"

Authentication (Public)
- POST /auth/register -> Public
  - Register a new user. Request body: User JSON.

- POST /auth/login -> Public
  - Login with email & password. Request body: User JSON (email, password).
  - Response: JWT token string.

User
- POST /user/users -> Protected (hasAnyRole('USER','ADMIN'))
  - Returns a `User` by email (expects `{ "email": "..." }` in the request body).

- GET /user/all -> Protected (hasAnyRole('USER','ADMIN'))
  - Returns list of all users.

- GET /user/id/{id} -> Protected (hasAnyRole('USER','ADMIN'))
  - Get a user by ID.

- GET /user/email/{email} -> Protected (hasAnyRole('USER','ADMIN'))
  - Get a user by email.

Questions
- POST /questions/add -> Protected, role=ADMIN
  - Create a new question. Request body: Question JSON.

- GET /questions/all -> Protected (hasAnyRole('USER','ADMIN'))
  - Get all questions.

- GET /questions/question/{id} -> Protected (hasAnyRole('USER','ADMIN'))
  - Get a question by ID.

- PUT /questions/question/{id} -> Protected, role=ADMIN
  - Update a question by ID.

- DELETE /questions/question/{id} -> Protected, role=ADMIN
  - Delete a question by ID.

- GET /questions/search?keyword={keyword} -> Protected (hasAnyRole('USER','ADMIN'))
  - Search questions by keyword.

- GET /questions/searchByTag?tag={tag} -> Protected (hasAnyRole('USER','ADMIN'))
  - Search questions by tag.

Code Submissions
- POST /submission/submit -> Protected (hasAnyRole('USER','ADMIN'))
  - Submit code. Request body: CodeSubmission JSON.

- GET /submission/user/{userId} -> Protected (hasAnyRole('USER','ADMIN'))
  - Get all submissions by a user.

- GET /submission/question/{questionId} -> Protected (hasAnyRole('USER','ADMIN'))
  - Get all submissions for a question.

- GET /submission/submission/{submissionId} -> Protected (hasAnyRole('USER','ADMIN'))
  - Get a submission by ID.

- PUT /submission/{submissionId} -> Protected (hasAnyRole('USER','ADMIN'))
  - Update a submission by ID. Request body: CodeSubmission JSON.

- DELETE /submission/{submissionId} -> Protected (hasAnyRole('USER','ADMIN'))
  - Delete a submission by ID.

Leaderboard / User Stats
- GET /leaderboard/{leaderBoardType} -> Protected (hasAnyRole('USER','ADMIN'))
  - Gets leaderboard data. `leaderBoardType` is a path variable determining the metric.

Access summary from `SecurityConfig` and controllers

- /auth/** -> permitAll (public)
- /submission/** -> hasAnyRole('USER','ADMIN')
- /user/** -> hasAnyRole('USER','ADMIN')
- /leaderboard/** -> hasAnyRole('USER','ADMIN')
- Any other request -> authenticated

Role-specific method-level guards (in controllers)

- Question creation, update, delete operations require ADMIN via `@PreAuthorize("hasRole('ADMIN')")`.
- Question read/search endpoints require USER or ADMIN.

If you want, I can also:

- Add example curl / PowerShell commands for each endpoint including an example login flow to obtain a token.
- Generate a small OpenAPI spec or Postman collection from these routes.

---
Generated by scanning controller and security configuration source files in this repository.

Endpoint Quick List (compact)
-----------------------------
- GET  /                                  -> Public
- POST /auth/register                      -> Public
- POST /auth/login                         -> Public (returns JWT)

- POST /user/users                         -> Protected (USER|ADMIN)
- GET  /user/all                           -> Protected (USER|ADMIN)
- GET  /user/id/{id}                       -> Protected (USER|ADMIN)
- GET  /user/email/{email}                 -> Protected (USER|ADMIN)

- POST /questions/add                      -> ADMIN only
- GET  /questions/all                      -> Protected (USER|ADMIN)
- GET  /questions/question/{id}            -> Protected (USER|ADMIN)
- PUT  /questions/question/{id}            -> ADMIN only
- DELETE /questions/question/{id}         -> ADMIN only
- GET  /questions/search?keyword={k}       -> Protected (USER|ADMIN)
- GET  /questions/searchByTag?tag={t}      -> Protected (USER|ADMIN)

- POST /submission/submit                  -> Protected (USER|ADMIN)
- GET  /submission/user/{userId}           -> Protected (USER|ADMIN)
- GET  /submission/question/{questionId}   -> Protected (USER|ADMIN)
- GET  /submission/submission/{submissionId} -> Protected (USER|ADMIN)
- PUT  /submission/{submissionId}          -> Protected (USER|ADMIN)
- DELETE /submission/{submissionId}        -> Protected (USER|ADMIN)

- GET  /leaderboard/{leaderBoardType}      -> Protected (USER|ADMIN)

